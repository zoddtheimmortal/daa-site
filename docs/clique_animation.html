<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Clique Animation</title>
		<script src="https://d3js.org/d3.v7.min.js"></script>
		<style>
			/* Dark Mode Styling */
			body {
				background-color: #1e1e1e;
				color: #ffffff;
				font-family: Arial, sans-serif;
				text-align: center;
				margin: 0;
				padding: 0;
				display: flex;
				flex-direction: column;
				align-items: center;
				justify-content: center;
				height: 100vh;
			}

			h2 {
				margin-bottom: 10px;
			}

			svg {
				width: 90%;
				height: 600px;
				background-color: #2a2a2a;
				border: 2px solid #444;
				border-radius: 10px;
			}

			.node {
				fill: #3498db;
				stroke: #ffffff;
				stroke-width: 2px;
				transition: fill 0.5s ease-in-out;
			}

			.clique {
				fill: #e74c3c !important;
				stroke: #ffcc00;
				stroke-width: 3px;
			}

			.link {
				stroke: #bbbbbb;
				stroke-width: 2px;
				transition: stroke 0.5s ease-in-out;
			}

			.clique-link {
				stroke: #ffcc00 !important;
				stroke-width: 4px !important;
			}

			.label {
				fill: #ffffff;
				font-size: 16px;
				font-weight: bold;
				text-anchor: middle;
				pointer-events: none;
			}

			.btn-container {
				margin-bottom: 10px;
			}

			.btn {
				background-color: #ffcc00;
				color: #1e1e1e;
				border: none;
				margin: 10px;
				margin-top: 15px;
				padding: 10px 20px;
				font-size: 16px;
				font-weight: bold;
				cursor: pointer;
				border-radius: 5px;
				transition: background-color 0.3s;
			}

			.btn:hover {
				background-color: #e6b800;
			}
		</style>
	</head>
	<body>
		<div class="btn-container">
			<button class="btn" onclick="highlightCliques()">
				Show Cliques
			</button>
		</div>
		<svg id="graph"></svg>

		<script>
			const width = 800,
				height = 600;

			// More complex Graph Data
			const nodes = [
				{ id: 0 },
				{ id: 1 },
				{ id: 2 },
				{ id: 3 },
				{ id: 4 },
				{ id: 5 },
				{ id: 6 },
				{ id: 7 },
				{ id: 8 },
				{ id: 9 },
			];

			const links = [
				{ source: 0, target: 1 },
				{ source: 1, target: 2 },
				{ source: 2, target: 3 },
				{ source: 3, target: 4 },
				{ source: 4, target: 0 },
				{ source: 1, target: 3 },
				{ source: 2, target: 5 },
				{ source: 5, target: 6 },
				{ source: 6, target: 7 },
				{ source: 7, target: 8 },
				{ source: 8, target: 9 },
				{ source: 9, target: 5 },
				{ source: 3, target: 6 },
				{ source: 4, target: 8 },
				{ source: 0, target: 7 },
			];

			// Define cliques (detected manually)
			const cliques = [
				[1, 2, 3], // Clique A
				[5, 6, 7, 9], // Clique B
				[0, 4, 8], // Clique C
			];

			const svg = d3
				.select("#graph")
				.attr("width", width)
				.attr("height", height);

			const simulation = d3
				.forceSimulation(nodes)
				.force(
					"link",
					d3
						.forceLink(links)
						.id((d) => d.id)
						.distance(120)
				)
				.force("charge", d3.forceManyBody().strength(-300))
				.force("center", d3.forceCenter(width / 2, height / 2));

			const link = svg
				.selectAll(".link")
				.data(links)
				.enter()
				.append("line")
				.attr("class", "link");

			const node = svg
				.selectAll(".node")
				.data(nodes)
				.enter()
				.append("circle")
				.attr("class", "node")
				.attr("r", 20);

			const labels = svg
				.selectAll(".label")
				.data(nodes)
				.enter()
				.append("text")
				.attr("class", "label")
				.text((d) => d.id);

			simulation.on("tick", () => {
				link.attr("x1", (d) => d.source.x)
					.attr("y1", (d) => d.source.y)
					.attr("x2", (d) => d.target.x)
					.attr("y2", (d) => d.target.y);

				node.attr("cx", (d) => d.x).attr("cy", (d) => d.y);

				labels.attr("x", (d) => d.x).attr("y", (d) => d.y + 6);
			});

			// Animate cliques
			function highlightCliques() {
				cliques.forEach((clique, i) => {
					setTimeout(() => {
						node.filter((d) => clique.includes(d.id))
							.transition()
							.duration(1000)
							.attr("class", "node clique");

						link.filter(
							(d) =>
								clique.includes(d.source.id) &&
								clique.includes(d.target.id)
						)
							.transition()
							.duration(1000)
							.attr("class", "link clique-link");
					}, i * 2000);
				});
			}
		</script>
	</body>
</html>
